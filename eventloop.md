# –ó–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º –Ω–∞ frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ - Event Loop

‚úÖ - –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –Ω–∞ –∑–∞–¥–∞—á—É –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–µ –≤ –∫–æ–¥–µ  
üìπ - –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –Ω–∞ –∑–∞–¥–∞—á—É –µ—Å—Ç—å –≤–∏–¥–µ–æ–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ

## Event Loop

### ‚úÖ üìπ –ó–∞–¥–∞—á–∞
[–í–∏–¥–µ–æ–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ](https://youtu.be/trYp_1AlrPM)

–ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å?

```ts 
setTimeout(() => console.log('setTimeout 1'), 0);

new Promise((resolve, reject) => {
    console.log('Promise 1');
    resolve();
    console.log('Promise 2');
}).then(() => console.log('Promise 3'));

Promise.resolve().then(() => setTimeout(() => console.log('setTimeout 2'), 0));

Promise.resolve().then(() => console.log('Promise 4'));

setTimeout(() => console.log('setTimeout 3'), 0);

console.log('final');
```

<details>
  <summary>–†–µ—à–µ–Ω–∏–µ</summary>

```ts
Promise 1

Promise 2

final

Promise 3

Promise 4

setTimeout 1

setTimeout 3

setTimeout 2
```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->


 ### ‚úÖ –ó–∞–¥–∞—á–∞
–õ–æ–≥–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è –≤ –ø—Ä–æ—à–ª–æ–π –∑–∞–¥–∞—á–µ

```ts
setTimeout(() => console.log(1));

new Promise(function (resolve, reject) {
    resolve();
  })
  .then(() => console.log(2))
  .then(() => console.log(3))
  .catch(() => console.log("err"))
  .then(() => setTimeout(() => console.log(4)));
  
console.log(5);

```

<details>
  <summary>–†–µ—à–µ–Ω–∏–µ</summary>

```ts
5
2
3
1
4
```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->

### ‚úÖ üìπ –ó–∞–¥–∞—á–∞
[–í–∏–¥–µ–æ–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ](https://youtu.be/VMY3ZuLGoEs)

```ts
// –ó–∞–¥–∞—á–∞ 1
Promise.reject("a")
.catch((p)=> p + "b")
.catch((p)=> p + "c")
.then((p)=>p + "d")
.then((p)=>console.log(p))

// –ó–∞–¥–∞—á–∞ 2
Promise.reject("a")
    .then((p)=>p + "2")
    .then((p)=>p + "3")
    .then((p)=> {
        throw new Error('4')
    })
    .catch((p)=> p + "5")
    .catch((p)=> p + "7")
    .then((p)=>p + "8")
    .catch((p)=> p + "9")
```

<details>
  <summary>–†–µ—à–µ–Ω–∏–µ</summary>

–ü–µ—Ä–≤—ã–π catch –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—É—é –æ—à–∏–±–∫—É, –≤—ã–±–æ—Ä—à–µ–Ω–Ω—É—é —á–µ—Ä–µ–∑ reject.  
–î–∞–ª—å—à–µ –≤ catch –Ω–µ –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ–º—Å—è –∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

```ts

// –ó–∞–¥–∞—á–∞ 1
Promise.reject("a")
.catch((p)=> p + "b") // –æ—Ç–ª–æ–≤–∏–ª–∏ reject
.catch((p)=> p + "c") // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ –æ—Ç–ª–æ–≤–∏–ª–∏ –æ—à–∏–±–∫—É –∏ –ø–æ–ª—É—á–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
.then((p)=>p + "d") // –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
.then((p)=>console.log(p)) // –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

// –†–µ–∑—É–ª—å—Ç–∞—Ç abd


// –ó–∞–¥–∞—á–∞ 2
Promise.reject("a")
.then((p)=>p + "2") // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –Ω—É–∂–Ω–æ –æ—Ç–ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫—É
.then((p)=>p + "3") // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –Ω—É–∂–Ω–æ –æ—Ç–ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫—É
.then((p)=> { throw new Error('4') }) // –æ—Ç–ª–æ–≤–∏–ª–∏ reject. –ò –æ—Ç–¥–∞–ª–∏ –µ—â–µ –æ–¥–Ω—É –æ—à–∏–±–∫—É
.catch((p)=> p + "5") // –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—ã–±—Ä–æ—à–µ–Ω–Ω—É—é –æ—à–∏–±–∫—É
.catch((p)=> p + "7") // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ –æ—Ç–ª–æ–≤–∏–ª–∏ –æ—à–∏–±–∫—É –∏ –ø–æ–ª—É—á–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
.then((p)=>p + "8") // –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
.catch((p)=> p + "9")  // –ø—Ä–æ–ø—É—Å–∫–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ –æ—Ç–ª–æ–≤–∏–ª–∏ –æ—à–∏–±–∫—É –∏ –ø–æ–ª—É—á–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

// –†–µ–∑—É–ª—å—Ç–∞—Ç a58
```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->


### ‚úÖ –ó–∞–¥–∞—á–∞

```ts
console.log('A')

const p = new Promise((resolve) => {
  resolve('');
  console.log('B')
});

p.then(() => {
  p.then(() => console.log('C'));
  console.log('D');
});

setTimeout(() => {
   console.log('E')
}, 0)

p.then(() => console.log('F'));

```

<details>
    <summary>–†–µ—à–µ–Ω–∏–µ</summary>

```ts
A
B
D
F
C
E
```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->

### ‚úÖ üìπ –ó–∞–¥–∞—á–∞

–ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å?

[–í–∏–¥–µ–æ–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ](https://youtu.be/oulYDWDxa5k)

```ts
setTimeout(function timeout() {
    console.log(1);
}, 0);

let p = new Promise(function(resolve, reject) {
    console.log(2);
    resolve();
});

p
.then(function() {
    console.log(5);
}).then(function() {
    console.log(6);
});

p
.then(function() {
    console.log(7);
}).then(function() {
    console.log(8);
});

console.log(4);

```

<details>
    <summary>–†–µ—à–µ–Ω–∏–µ</summary>

```ts

2 4 5 7 6 8 1
```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->



### –ó–∞–¥–∞—á–∞

–ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å?

```ts

async function f() {
    console.log(1);
    
    const promise = new Promise((resolve) => {
        console.log(2);
        setTimeout(() => {
            console.log(3);
            resolve('–≥–æ—Ç–æ–≤–æ!');
            console.log(4);
        });
    });
    
    console.log(5);

    const result = await promise;
    console.log(6);
    console.log(result);
    
    return 'Result';
}

f();
console.log(7);


```

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->

### –ó–∞–¥–∞—á–∞

–ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –∏ –ø–æ—á–µ–º—É?

```ts
var p1 = new Promise(function(resolve, reject) {
    console.log(5);
    setTimeout(resolve, 500, "1");
});
var p2 = new Promise(function(resolve, reject) {
    setTimeout(resolve, 100, "2");
});

Promise.race([p1, p2]).then(function(value) {
  console.log(value);
});
```

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->


### ‚úÖ üìπ –ó–∞–¥–∞—á–∞

–ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å?

[–í–∏–¥–µ–æ–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ](https://youtu.be/oulYDWDxa5k)

```ts
console.log('77')

const p = new Promise((_, reject) => {
    setTimeout(() => {
        console.log('reject');
        reject();
    }, 2000);
});

p
.then(
    () => console.log('10'),
    () => console.log('11')
)
.then(
    () => console.log('13'),
    () => console.log('14')
);

p
.then(
    () => console.log('18'),
    () => console.log('19')
);

p.then(
    () => console.log('23'),
    () => console.log('24')
);


```

<details>
    <summary>–†–µ—à–µ–Ω–∏–µ</summary>

```ts
77
reject
11
19
24
13

```
</details>

 ---
 <!--  ------------------------------------------------------------------------------------------------------------------------------------------------------- -->

